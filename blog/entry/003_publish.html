<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <link rel="alternate" type="application/atom+xml" title="Atom" href="http://songmu.github.io/p5-Riji/blog/atom.xml">
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/css/bootstrap.min.css" rel="stylesheet">
  <title>Riji tutorial</title>
</head>
<body>
  <header>
    <h1><a href="http://songmu.github.io/p5-Riji/blog/">Riji tutorial</a></h1>
  </header>
  <section>
<article>
  <div class="entry">
    <h1>003. Blogの書き出し</h1>

<p>前回勿体つけて「Blogの書き出し」などといいましたが、Blogの書き出しは実に簡単で以下のコマンドを実行するだけです。</p>

<pre><code>% riji publish
</code></pre>

<p>上手く行けばblog/というディレクトリが作られ、その中にサイト一式が格納されているはずです。atom.xmlも入っていますね。</p>

<p>もしかしたら、wgetが無いことを怒られるかもしれません。その場合はwgetをインストールしてください。なんでwgetを使ってるかは実装を見て察してください。</p>

<p>あとは、blog/ディレクトリをどこかにアップロードするだけです。せっかくgitリポジトリになっているので、そのままGitHub Pages等にpushしてしまっても良いんじゃないかと思います。</p>

<h2>publishディレクトリの変更</h2>

<p>上のようにデフォルトでは blog/ にサイトが作られますが、これを変更したいという要望もあるかと思います。その場合は、riji.ymlにpublish_dirというキーを追加して設定を書いてください。'.' に設定したらカレントディレクトリにドバっと作られます。</p>

<h2>GitHub Pagesについて</h2>

<p>githubで"[username].github.io"というリポジトリを作成するとそれを自分のサイトとして運用することが可能になります。git pushすればすぐにサイトに反映されるので非常に楽ちんです。Rijiで作成したblogの配信先として検討しても良いと思います。</p>

<h2>Githubリポジトリへのページ設置について</h2>

<p>[username].github.ioに関してはよく知られるところですが、自分のリポジトリで<code>gh-pages</code>というブランチを作るとそれもGitHub Pagesとして運用可能であることはご存知でしょうか？これで作られたサイトは http://[username].github.io/[repositoryname]/ というURLでアクセスが可能になります。</p>

<p>具体的には以下の手順で作成します。</p>

<dl>
<dt>親のないブランチを作成</dt>
<dd><code>% git checkout --orphan gh-pages</code></dd>
<dt>ファイルを全て削除</dt>
<dd><code>% git rm -rf *</code></dd>
<dt>空じゃないディレクトリにセットアップするので--forceをつけてriji setup</dt>
<dd><code>% riji setup --force</code></dd>
<dt>追随するブランチがmasterブランチではないので、riji.ymlに追随ブランチの設定をする</dt>
<dd><code>% echo 'branch: gh-pages' &gt;&gt; riji.yml</code></dd>
<dt>pushする</dt>
<dd><code>% git push --set-upstream origin gh-pages</code></dd>
</dl>

<p>あとはこれまで学んできたようにRijiを運用するだけです。</p>

<p>今回はここまでです。</p>

<h2>次回の内容</h2>

<p>とりあえず、公開するところまではできましたが、デザインの調整等がしたくなってきている頃かと思います。
次回は、静的ファイルの配信について説明します。</p>

  </div>
</article>
  </section>
  <footer>
  </footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/js/bootstrap.min.js"></script>
  <script src="//google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
  <script>$(function(){$('pre > code').addClass('prettyprint');prettyPrint();});</script>
</body>
</html>
